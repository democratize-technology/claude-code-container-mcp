FROM ghcr.io/zeeno-atl/claude-code:latest

# Install jq and curl
RUN apt-get update && apt-get install -y jq curl && rm -rf /var/lib/apt/lists/*

# Install uv (Python package manager)
RUN curl -LsSf https://astral.sh/uv/install.sh | sh
ENV PATH="/root/.local/bin:${PATH}"

# Copy MCP wrapper  
COPY mcp-wrapper.sh /mcp-wrapper.sh
RUN chmod +x /mcp-wrapper.sh

# Set it as the entrypoint
ENTRYPOINT ["/mcp-wrapper.sh"]

# Keep original CMD
CMD ["tail", "-f", "/dev/null"]
